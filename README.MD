# ğŸ¦ Sistema de Banca en LÃ­nea

Un sistema completo de banca en lÃ­nea desarrollado con **React** (frontend), **Go** (backend), **PostgreSQL** (base de datos) y **TigerBeetle** (motor de contabilidad de alto rendimiento).

## ğŸ“‹ Tabla de Contenidos

- [ğŸš€ Inicio RÃ¡pido](#-inicio-rÃ¡pido)
- [ğŸ› ï¸ TecnologÃ­as](#ï¸-tecnologÃ­as)
- [ğŸ“ Estructura del Proyecto](#-estructura-del-proyecto)
- [âš™ï¸ ConfiguraciÃ³n del Entorno](#ï¸-configuraciÃ³n-del-entorno)
- [ğŸ³ InstalaciÃ³n con Docker](#-instalaciÃ³n-con-docker)
- [ğŸ” Credenciales de Prueba](#-credenciales-de-prueba)
- [ğŸŒ URLs del Sistema](#-urls-del-sistema)
- [ğŸ§ª Funcionalidades](#-funcionalidades)
- [ğŸ”§ Desarrollo Local](#-desarrollo-local)
- [ğŸ“Š Base de Datos](#-base-de-datos)
- [ğŸš¨ SoluciÃ³n de Problemas](#-soluciÃ³n-de-problemas)
- [ğŸ“ Logs y Debugging](#-logs-y-debugging)

## ğŸš€ Inicio RÃ¡pido

### Prerrequisitos

- **Docker** y **Docker Compose** instalados
- **Git** para clonar el repositorio
- **Puerto 8082** disponible (frontend)
- **Puerto 8080** disponible (backend)
- **Puerto 5432** disponible (PostgreSQL)

### InstalaciÃ³n en 3 pasos

```bash
# 1. Clonar el repositorio
git clone <url-del-repositorio>
cd banca-en-linea

# 2. Configurar variables de entorno
cp .env.example .env
cp packages/backend/.env.example packages/backend/.env
cp packages/frontend/.env.example packages/frontend/.env

# 3. Levantar el sistema completo
docker-compose up --build
```

Â¡Listo! El sistema estarÃ¡ disponible en: **http://localhost:8082**

## ğŸ› ï¸ TecnologÃ­as

### Frontend
- **React 18** con Hooks
- **Vite** como bundler
- **Tailwind CSS** para estilos
- **React Router** para navegaciÃ³n
- **Context API** para manejo de estado

### Backend
- **Go 1.21+** con Gin framework
- **PostgreSQL 15** como base de datos principal
- **TigerBeetle** para contabilidad de alto rendimiento
- **JWT** para autenticaciÃ³n
- **CORS** configurado para desarrollo

### DevOps
- **Docker** y **Docker Compose**
- **Multi-stage builds** para optimizaciÃ³n
- **Nginx** como servidor web para producciÃ³n

## ğŸ“ Estructura del Proyecto

```
banca-en-linea/
â”œâ”€â”€ ğŸ“„ .env.example              # Variables de entorno globales
â”œâ”€â”€ ğŸ“„ docker-compose.yml       # ConfiguraciÃ³n de Docker
â”œâ”€â”€ ğŸ“„ README.MD                # Este archivo
â”œâ”€â”€ ğŸ“ packages/
â”‚   â”œâ”€â”€ ğŸ“ backend/             # API en Go
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ .env.example     # Variables del backend
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ main.go          # Punto de entrada
â”‚   â”‚   â”œâ”€â”€ ğŸ“ internal/        # LÃ³gica de negocio
â”‚   â”‚   â”œâ”€â”€ ğŸ“ models/          # Modelos de datos
â”‚   â”‚   â”œâ”€â”€ ğŸ“ database/        # ConfiguraciÃ³n de DB
â”‚   â”‚   â””â”€â”€ ğŸ“ migrations/      # Migraciones SQL
â”‚   â”œâ”€â”€ ğŸ“ frontend/            # AplicaciÃ³n React
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ .env.example     # Variables del frontend
â”‚   â”‚   â”œâ”€â”€ ğŸ“ src/             # CÃ³digo fuente
â”‚   â”‚   â”œâ”€â”€ ğŸ“ public/          # Archivos estÃ¡ticos
â”‚   â”‚   â””â”€â”€ ğŸ“„ package.json     # Dependencias
â”‚   â””â”€â”€ ğŸ“ tigerbeetle/         # Motor de contabilidad
â””â”€â”€ ğŸ“ scripts/                 # Scripts de utilidad
```

## âš™ï¸ ConfiguraciÃ³n del Entorno

### 1. Variables de Entorno Globales (`.env`)

```bash
# Base de datos PostgreSQL
POSTGRES_DB=banca_db
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres123
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Backend
BACKEND_PORT=8080
JWT_SECRET=tu-clave-secreta-muy-segura-aqui

# Frontend
FRONTEND_PORT=8082
VITE_API_URL=http://localhost:8080

# Docker
COMPOSE_PROJECT_NAME=banca
```

### 2. Variables del Backend (`packages/backend/.env`)

```bash
# Base de datos
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres123
DB_NAME=banca_db

# Servidor
PORT=8080
JWT_SECRET=tu-clave-secreta-muy-segura-aqui
ENVIRONMENT=development

# CORS (para desarrollo)
CORS_ORIGINS=http://localhost:8082,http://localhost:3000
```

### 3. Variables del Frontend (`packages/frontend/.env`)

```bash
# API
VITE_API_URL=http://localhost:8080

# Desarrollo
VITE_PORT=8082
VITE_APP_NAME=Banca en LÃ­nea
VITE_APP_VERSION=1.0.0
```

## ğŸ³ InstalaciÃ³n con Docker

### OpciÃ³n 1: InstalaciÃ³n Completa (Recomendada)

```bash
# Construir y levantar todos los servicios
docker-compose up --build

# En segundo plano
docker-compose up --build -d
```

### OpciÃ³n 2: Servicios Individuales

```bash
# Solo la base de datos
docker-compose up postgres

# Backend + Base de datos
docker-compose up postgres backend

# Sistema completo
docker-compose up postgres backend frontend
```

### Comandos Ãštiles de Docker

```bash
# Ver logs en tiempo real
docker-compose logs -f

# Ver logs de un servicio especÃ­fico
docker-compose logs -f backend
docker-compose logs -f frontend
docker-compose logs -f postgres

# Reconstruir un servicio especÃ­fico
docker-compose build backend
docker-compose build frontend

# Reiniciar servicios
docker-compose restart backend
docker-compose restart frontend

# Detener todos los servicios
docker-compose down

# Detener y eliminar volÃºmenes
docker-compose down -v

# Ver estado de los contenedores
docker-compose ps
```

## ğŸ” Credenciales de Prueba

### Usuario Administrador
- **Email:** `admin@banco.com`
- **ContraseÃ±a:** `admin123`
- **Rol:** Administrador del sistema

### Usuario Cliente
- **Email:** `cliente@banco.com`
- **ContraseÃ±a:** `cliente123`
- **Rol:** Cliente bancario

### Base de Datos PostgreSQL
- **Host:** `localhost:5432`
- **Usuario:** `postgres`
- **ContraseÃ±a:** `postgres123`
- **Base de datos:** `banca_db`

## ğŸŒ URLs del Sistema

| Servicio | URL | DescripciÃ³n |
|----------|-----|-------------|
| **Frontend** | http://localhost:8082 | AplicaciÃ³n web principal |
| **Backend API** | http://localhost:8080 | API REST |
| **Health Check** | http://localhost:8080/health | Estado del backend |
| **API Docs** | http://localhost:8080/api/docs | DocumentaciÃ³n de la API |

### Endpoints Principales

```bash
# AutenticaciÃ³n
POST /auth/login          # Iniciar sesiÃ³n
POST /auth/register       # Registrar usuario
POST /auth/logout         # Cerrar sesiÃ³n
GET  /auth/me            # Obtener usuario actual

# Cuentas
GET  /accounts           # Listar cuentas
POST /accounts           # Crear cuenta
GET  /accounts/:id       # Obtener cuenta especÃ­fica

# Transacciones
GET  /transactions       # Listar transacciones
POST /transactions       # Crear transacciÃ³n
GET  /transactions/:id   # Obtener transacciÃ³n especÃ­fica

# Usuarios (Admin)
GET  /users              # Listar usuarios
POST /users              # Crear usuario
PUT  /users/:id          # Actualizar usuario
DELETE /users/:id        # Eliminar usuario
```

## ğŸ§ª Funcionalidades

### âœ… Implementadas

- **AutenticaciÃ³n JWT** con login/logout
- **Registro de usuarios** con validaciÃ³n
- **Dashboard principal** con resumen de cuentas
- **GestiÃ³n de cuentas bancarias**
- **Historial de transacciones**
- **Interfaz responsive** con Tailwind CSS
- **ValidaciÃ³n de formularios**
- **Manejo de errores** centralizado

### ğŸš§ En Desarrollo

- **Transferencias entre cuentas**
- **IntegraciÃ³n completa con TigerBeetle**
- **Reportes financieros**
- **Notificaciones en tiempo real**
- **Panel de administraciÃ³n**

## ğŸ”§ Desarrollo Local

### Sin Docker (Desarrollo Nativo)

#### Backend (Go)

```bash
cd packages/backend

# Instalar dependencias
go mod download

# Configurar variables de entorno
cp .env.example .env

# Ejecutar migraciones (requiere PostgreSQL corriendo)
go run main.go migrate

# Iniciar servidor de desarrollo
go run main.go
```

#### Frontend (React)

```bash
cd packages/frontend

# Instalar dependencias
npm install
# o
pnpm install

# Configurar variables de entorno
cp .env.example .env

# Iniciar servidor de desarrollo
npm run dev
# o
pnpm dev
```

### Herramientas de Desarrollo

```bash
# Linting del frontend
cd packages/frontend
npm run lint

# Build de producciÃ³n
npm run build

# Tests del backend
cd packages/backend
go test ./...

# Formatear cÃ³digo Go
go fmt ./...
```

## ğŸ“Š Base de Datos

### Migraciones

Las migraciones se ejecutan automÃ¡ticamente al iniciar el backend. Los archivos estÃ¡n en `packages/backend/migrations/`.

### Esquema Principal

```sql
-- Usuarios
users (id, email, password_hash, first_name, last_name, role, created_at, updated_at)

-- Cuentas bancarias
accounts (id, user_id, account_number, account_type, balance, currency, created_at, updated_at)

-- Transacciones
transactions (id, from_account_id, to_account_id, amount, transaction_type, description, status, created_at)
```

### ConexiÃ³n Manual a la Base de Datos

```bash
# Usando Docker
docker-compose exec postgres psql -U postgres -d banca_db

# Usando cliente local
psql -h localhost -p 5432 -U postgres -d banca_db
```

## ğŸš¨ SoluciÃ³n de Problemas

### Problema: Puerto ya en uso

```bash
# Verificar quÃ© proceso usa el puerto
netstat -ano | findstr :8082
netstat -ano | findstr :8080

# Matar proceso especÃ­fico (Windows)
taskkill /PID <PID> /F

# Cambiar puerto en docker-compose.yml
ports:
  - "8083:8082"  # Cambiar puerto externo
```

### Problema: Error de conexiÃ³n a la base de datos

```bash
# Verificar que PostgreSQL estÃ© corriendo
docker-compose ps

# Reiniciar solo la base de datos
docker-compose restart postgres

# Ver logs de PostgreSQL
docker-compose logs postgres
```

### Problema: Frontend no se conecta al backend

1. Verificar que `VITE_API_URL` estÃ© configurado correctamente
2. Verificar que el backend estÃ© corriendo en el puerto correcto
3. Revisar configuraciÃ³n de CORS en el backend

### Problema: Error de autenticaciÃ³n

1. Verificar que `JWT_SECRET` sea el mismo en backend y frontend
2. Limpiar localStorage del navegador
3. Verificar que las credenciales sean correctas

## ğŸ“ Logs y Debugging

### Ver Logs en Tiempo Real

```bash
# Todos los servicios
docker-compose logs -f

# Solo backend
docker-compose logs -f backend

# Solo frontend
docker-compose logs -f frontend

# Solo base de datos
docker-compose logs -f postgres
```

### Logs de Debugging

El sistema incluye logs detallados para debugging:

#### Frontend (Consola del navegador)
- `ğŸ” AuthContext:` Logs de autenticaciÃ³n
- `ğŸŒ API:` Logs de peticiones HTTP
- `âŒ Errores:` Logs de errores

#### Backend (Terminal)
- Logs de peticiones HTTP con mÃ©todo, URL y tiempo de respuesta
- Logs de conexiÃ³n a base de datos
- Logs de errores con stack trace

### Debugging en Desarrollo

```bash
# Habilitar logs detallados en el backend
export LOG_LEVEL=debug

# Habilitar debugging en el frontend
export VITE_DEBUG=true
```

## ğŸ¤ ContribuciÃ³n

1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/nueva-funcionalidad`)
3. Commit tus cambios (`git commit -am 'Agregar nueva funcionalidad'`)
4. Push a la rama (`git push origin feature/nueva-funcionalidad`)
5. Abre un Pull Request

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la Licencia MIT. Ver el archivo `LICENSE` para mÃ¡s detalles.

---

## ğŸ†˜ Soporte

Si tienes problemas o preguntas:

1. Revisa la secciÃ³n de [SoluciÃ³n de Problemas](#-soluciÃ³n-de-problemas)
2. Verifica los logs con `docker-compose logs -f`
3. Abre un issue en el repositorio

**Â¡Feliz desarrollo! ğŸš€**